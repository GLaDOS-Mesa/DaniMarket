# DaniMarket

Platform for managing and publishing listings across multiple marketplaces (eBay, Vinted, Subito, Facebook).

## Tech Stack

- **Framework**: Nuxt 3 + TypeScript
- **Styling**: Tailwind CSS
- **Database**: PostgreSQL 16 (Docker) + Prisma 7
- **Image Upload**: Local filesystem (Cloudinary planned)
- **Deployment**: Vercel

## Requirements

- Node.js >= 20
- Docker Desktop (for the database)
- npm

## Setup

```bash
# Install dependencies
npm install

# Copy the configuration file
cp .env.example .env

# Start the PostgreSQL database
npm run db:up

# Run migrations
npm run db:migrate

# Seed the database with test data
npm run db:seed
```

## Development

```bash
# Start the development server
npm run dev
```

The app will be available at `http://localhost:3000`.

## Database

The project uses PostgreSQL running in Docker with Prisma ORM.

```bash
npm run db:up        # Start the PostgreSQL container
npm run db:down      # Stop the container
npm run db:reset     # Full reset (delete data + re-seed)
npm run db:migrate   # Run migrations
npm run db:seed      # Seed with test data
npm run db:studio    # Open Prisma Studio (database GUI)
```

**Prisma Studio** is available at `http://localhost:5555` after running `npm run db:studio`.

## API

REST APIs are available under `/api/`. Interactive documentation is auto-generated by Nitro OpenAPI.

### Interactive Documentation

With the dev server running (`npm run dev`):

| URL | Description |
|-----|-------------|
| `http://localhost:3000/_swagger` | **Swagger UI** — classic interface to explore and test APIs |
| `http://localhost:3000/_scalar` | **Scalar** — modern alternative to Swagger UI |
| `http://localhost:3000/_openapi.json` | OpenAPI 3.1 specification in JSON format |

### Main Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/api/health` | Healthcheck |
| `GET` | `/api/listings` | List listings (filters: `status`, `category`, `search`) |
| `GET` | `/api/listings/:id` | Listing detail |
| `POST` | `/api/listings` | Create listing |
| `PUT` | `/api/listings/:id` | Update listing (partial update) |
| `DELETE` | `/api/listings/:id` | Delete listing |

## Testing

```bash
npm run test          # Run tests in watch mode
npm run test:run      # Run tests once
npm run test:coverage # Run tests with coverage report
```

## Project Structure

```
DaniMarket/
├── prisma/
│   ├── schema.prisma       # Database schema
│   └── seed.ts             # Test data
├── server/
│   ├── api/                # API endpoints (file-based routing)
│   │   ├── health.get.ts
│   │   └── listings/
│   └── utils/              # Server utilities (auto-imported)
│       ├── prisma.ts       # Database client
│       ├── auth.ts         # Authentication (dev)
│       ├── response.ts     # API response helpers
│       └── cloudinary.ts   # Cloudinary integration
├── components/             # Reusable Vue components
├── composables/            # Vue composables (shared logic)
├── layouts/                # Page layouts
├── pages/                  # File-based routing
├── types/                  # TypeScript definitions
└── assets/css/             # Styles (Tailwind)
```
